"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(e,t){if(null==e)return{};var n,r,u={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(u[n]=e[n]);return u}var r={value:{errors:{},ev:!1,initialValues:{},resetted:!1,setError:function(e,t){},setInitialValue:function(e,t){},setSuccess:function(e,t){},setValue:function(e,t){},submitted:!1,successes:{},values:{}}},u=e.createContext(r.value),s=function(e,t){var n;return void 0===t&&(t=0),function(){for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){n=null,e.apply(null,u)}),t)}},i=function(e,t){return Object.keys(e).reduce((function(n,r){return t.includes(r)||(n[r]=e[r]),n}),{})},o=function(r){var s,i,o=r.children,a=r.validation,c=r.name,l=n(r,["children","validation","name"]),f=e.useContext(u),v=f.errors,d=f.setError,m=f.setSuccess,p=f.successes,h=f.values;return e.cloneElement(o,t({},l,{onChange:(i=null==o||null===(s=o.props)||void 0===s?void 0:s.onChange,function(e){e.preventDefault(),a({errors:v,setError:function(e){return d(c,e)},setSuccess:function(e){return m(c,e)},successes:p,value:e.target.value,values:h}),i&&i(e)})}))};exports.Field=function(r){var s=r.children,i=r.name,o=r.onChange,a=r.value,c=n(r,["checked","children","name","onChange","value"]),l=e.useContext(u),f=l.setInitialValue,v=l.setValue,d=l.values[i],m=s.props,p=m.value,h=/checkbox|radio/.test(null==m?void 0:m.type),b=h?{checked:d===a}:{value:d||(m.multiple?[""]:"")},E=e.useState(),x=E[0],g=E[1],y=e.useState(d),V=y[0],C=y[1];if(!i)throw new Error("Error: Please, you have to add a name to the form field");return e.useEffect((function(){var e=0;return x&&o?(x&&o&&o(x),e=setTimeout((function(){return v(i,V)}))):void 0!==V&&v(i,V),"radio"===(null==m?void 0:m.type)&&d!==a&&C(void 0),function(){e&&clearTimeout(e)}}),[V,v]),e.useEffect((function(){var e=h?m.checked?p:"":p;""!==e&&f(i,e),""!==e&&v(i,e)}),[]),e.cloneElement(s,t({},c,{},b,{name:i,onChange:function(e){var t=e.target,n="select-multiple"===t.type?Array.from(t.selectedOptions).map((function(e){return e.value})):t.value,r=!0===t.checked?n:"";e.persist(),C(h?r:n),g(e)}}))},exports.Form=function(r){var o=r.children,a=r.onReset,c=r.onSubmit,l=r.wait,f=n(r,["children","onReset","onSubmit","wait"]),v=e.useState({errors:{},ev:!1,initialValues:{},resetted:!1,submitted:!1,successes:{},values:{},setError:s((function(e,n){m((function(r){var u;return t({},r,{errors:t({},r.errors,(u={},u[e]=n,u))})}))}),l||750),setInitialValue:function(e,n){m((function(r){var u,s;return t({},r,{initialValues:t({},r.initialValues,(u={},u[e]=n,u)),values:t({},r.values,(s={},s[e]=n,s))})}))},setSuccess:s((function(e,n){m((function(r){var u;return t({},r,{successes:t({},r.successes,(u={},u[e]=n,u))})}))}),l||750),setValue:function(e,n){m((function(r){var u;return t({},r,{errors:i(r.errors,[e]),submitted:!1,successes:i(d.successes,[e]),values:t({},r.values,(u={},u[e]=n,u))})}))}}),d=v[0],m=v[1];return e.useEffect((function(){d.submitted&&c&&(c(t({},d)),m((function(e){return t({},e,{submitted:!1})})))}),[c,d]),e.useEffect((function(){var e=d.ev;e&&d.resetted&&a&&(a(t({ev:e},d)),m((function(e){return t({},e,{resetted:!1})})))}),[a,d]),e.createElement(u.Provider,{value:d},e.createElement("form",Object.assign({},f,{onSubmit:function(e){e.preventDefault(),e.persist(),m((function(n){return t({},n,{ev:e,submitted:!0})}))},onReset:function(e){e.preventDefault(),e.persist(),m((function(n){return t({},n,{errors:{},ev:e,resetted:!0,successes:{},values:n.initialValues})}))}}),o))},exports.FormConsumer=function(t){return e.createElement(u.Consumer,null,t.children)},exports.FormContext=u,exports.Validator=o,exports.debounce=s,exports.initialState=r,exports.omit=i,exports.withValidation=function(t){var r=t.name,u=t.validation,s=n(t,["name","validation"]);return function(t){return e.createElement(o,{name:r,validation:u},e.createElement(t,Object.assign({name:r},s)))}};
//# sourceMappingURL=react-form-core.cjs.production.min.js.map
